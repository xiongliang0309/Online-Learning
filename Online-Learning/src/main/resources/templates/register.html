<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>用户注册 </title>

    <!-- Bootstrap -->
    <link th:href="@{/vendors/bootstrap/dist/css/bootstrap.min.css}" rel="stylesheet">
    <!-- Font Awesome -->
    <link th:href="@{/vendors/font-awesome/css/font-awesome.min.css}" rel="stylesheet">
    <!-- NProgress -->
    <link th:href="@{/vendors/nprogress/nprogress.css}" rel="stylesheet">
    <!-- Animate.css -->
    <link th:href="@{/vendors/animate.css/animate.min.css}" rel="stylesheet">

    <!-- Custom Theme Style -->
    <link th:href="@{/build/css/custom.min.css}" rel="stylesheet">

    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <style>


        .registerpage {
            position: relative;
            height: 720px;
            background-image: url(1.jpg);
            width: 100%;
        }


        .register {
            width: 600px;
            box-shadow: 0 0 10px #ccc;
            border-radius: 5px;
            border: 1px solid rgba(88, 190, 110, 0.973);
            margin-top: 50px;
            margin-left: 40px;
            background: white;
            margin-bottom: 50px;
        }

        .register input {
            border-radius: 3px;
            border: 1px solid rgb(202, 199, 199);
        }

        .reg-foot {
            margin-bottom: 20px;
        }


        .login input,
        .login select,
        .login button {
            width: 400px;
            height: 50px;
            margin-left: 100px;
            margin-top: 20px;

        }

        .register input,
        .register select {
            width: 400px;
            height: 50px;
            margin-left: 100px;
            margin-top: 1px;
            margin-bottom: 1px;

        }

        .register button {
            margin-top: 13px;
            width: 400px;
            height: 50px;
            margin-left: 100px;
        }

        .login h2 {
            text-align: center;
            margin-bottom: 0px;
            margin-top: 30px;
            font-size: 25px;
            color: rgb(81, 170, 81);
        }

        .register h2 {
            text-align: center;
            margin-bottom: 15px;
            margin-top: 30px;
            font-size: 25px;
            color: rgb(81, 170, 81);
        }


        .login span {
            font-size: 50px;
        }

        .login a,
        .register a {
            margin-left: 230px;
        }
        .msg {
            font-size: 20px;
        }

        .onError {
            color: red;
        }

        .onSuccess {
            color: green;
        }
        .int {
            height: 30px;
            text-align: left;
            width: 800px;
        }

        .high {
            color: red;
        }

    </style>
</head>

<body>

<div class="registerpage">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-md-offset-3">
                <div class="register">
                    <div class="title">
                        <h2><span class="glyphicon glyphicon-education"></span>注册新的账号</h2>
                    </div>
                    <form th:action="@{/registerCheck.action}" method="POST" role="form" class="login-form">
                        <div class="form-group">
                            <label for="name" class="sr-only">账号：</label>
                            <input type="text" id="id"  class="required" placeholder="   用户名...大于6位，不含特殊字符" name="id" />
                        </div>
                        <div class="form-group">
                            <label for="psw" class="sr-only">密码：</label>
                            <input type="password" id="password" class="required" placeholder="   密码..." name="password" />
                        </div>
                        <div class="form-group">
                            <label for="checkPsw" class="sr-only">姓名：</label>
                            <input type="password" id="name" class="required" placeholder="   确认密码。。。" name="name" />
                        </div>
                        <div class="form-group">
                            <label for="email" class="sr-only">邮箱：</label>
                            <input type="text" id="email" class="required" placeholder="   邮箱。。" name="email" />
                        </div>
                        <div class="form-group">
                            <label for="phone" class="sr-only">手机：</label>
                            <input type="text" id="phone" class="required" placeholder="   手机号" name="phone" />
                        </div>
                        <select class="selectpicker show-tick form-control" name="option" id="option">
                            <option value="teacher">教师</option>
                            <option value="student">学生</option>
                            <option value="help">助教</option>
                        </select>
                        <button type="submit" class="btn btn-success registerbtn">注册</button><br><br>
                        <div class="reg-foot">
                            <a href="/login">已有账号？去登录。。。</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    //为表单的必填文本框添加提示信息（选择form中的所有后代input元素）

    //为表单元素添加失去焦点事件
    $("form :input").blur(function () {
        var $parent = $(this).parent();
        $parent.find(".msg").remove(); //删除以前的提醒元素（find()：查找匹配元素集中元素的所有匹配元素）
        //验证姓名
        if ($(this).is("#id")) {
            var nameVal = $.trim(this.value); //原生js去空格方式：this.replace(/(^\s*)|(\s*$)/g, "")
            var regName = /[~#^$@%&!*()<>:;'"{}【】  ]/;
            if (nameVal == "" || nameVal.length < 6 || regName.test(nameVal)) {
                var errorMsg = " ！";
                //class='msg onError' 中间的空格是层叠样式的格式
                $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
            } else {
                var okMsg = " √";
                $parent.find(".high").remove();
                $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
            }
        }
        //验证密码
        if ($(this).is("#password")) {
            var pswVal = $.trim(this.value);
            var regPsw = /^.*(?=.{6,})(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&*? ]).*$/;
            if (pswVal == "" || (pswVal != "" && !regPsw.test(pswVal))) {
                var errorMsg = "！";
                $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
            } else {
                var okMsg = " √";
                $parent.find(".high").remove();
                $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
            }
        }
        //确认密码
        // if ($(this).is("#checkPsw")) {
        //     var checkPswVal = $.trim(this.value);
        //     var pswVal = $("#psw").val();
        //     if (checkPswVal != pswVal) {
        //         var errorMsg = "！";
        //         $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
        //     } else {
        //         var okMsg = " √";
        //         $parent.find(".high").remove();
        //         $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
        //     }
        // }
        //验证邮箱
        if ($(this).is("#email")) {
            var emailVal = $.trim(this.value);
            var regEmail = /.+@.+\.[a-zA-Z]{2,4}$/;
            if (emailVal == "" || (emailVal != "" && !regEmail.test(emailVal))) {
                var errorMsg = " ！";
                $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
            } else {
                var okMsg = " √";
                $parent.find(".high").remove();
                $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
            }
        }
        //验证手机
        if ($(this).is("#phone")) {
            var phoneVal = $.trim(this.value);
            var regPhone = /^1(3|4|5|7|8)\d{9}$/;
            if (phoneVal == "" || (phoneVal != "" && !regPhone.test(phoneVal))) {
                var errorMsg = "！";
                $parent.append("<span class='msg onError'>" + errorMsg + "</span>");
            } else {
                var okMsg = " √";
                $parent.find(".high").remove();
                $parent.append("<span class='msg onSuccess'>" + okMsg + "</span>");
            }
        }


    }).keyup(function () {
        //triggerHandler 防止事件执行完后，浏览器自动为标签获得焦点
        $(this).triggerHandler("blur");
    }).focus(function () {
        $(this).triggerHandler("blur");
    });

    //点击重置按钮时，通过trigger()来触发文本框的失去焦点事件
    // $("#send").click(function () {
    //     //trigger 事件执行完后，浏览器会为submit按钮获得焦点
    //     $("form .required:input").trigger("blur");
    //     var numError = $("form .onError").length;
    //     if (numError) {
    //         return false;
    //     }
    //     alert("注册成功！");
    // });
</script>
<!--<div>-->
    <!--<div class="login_wrapper">-->
        <!--<section class="login_content">-->
            <!--<form th:action="@{/registerCheck.action}" method="POST">-->
                <!--<h1>用户注册</h1>-->
                <!--<div>-->
                    <!--<input type="text" class="form-control" name="id" placeholder="账号" required="required"/>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<input type="password" class="form-control" name="password" placeholder="密码" required="required"/>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<input type="text" class="form-control" name="name" placeholder="姓名" required="required"/>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<input type="text" class="form-control" name="phone" placeholder="电话" required="required"/>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<input type="text" class="form-control" name="email" placeholder="邮箱" required="required"/>-->
                <!--</div>-->
                <!--<div>-->
                    <!--<input type="submit" class="btn btn-default submit" value="注册"/>-->

                    <!--<select class="select2-selection__choice" title="注册账号种类" name="option" id="option">-->
                        <!--<option value ="leaseholder">租户</option>-->
                        <!--<option value="landlord">房东</option>-->
                    <!--</select>-->

                    <!--<a class="reset_pass" href="/login">返回登录界面</a>-->
                <!--</div>-->

                <!--<div class="clearfix"></div>-->

                <!--<div class="separator">-->
                    <!--<div class="clearfix"></div>-->
                    <!--<br />-->

                    <!--<div>-->
                        <!--<h1><em class="fa fa-home"></em> Lang Zi Short Rent</h1>-->
                        <!--<p>©2018 All Rights Reserved. Lang Zi Short Rent using a Bootstrap 3 template. Privacy and Terms</p>-->
                    <!--</div>-->
                <!--</div>-->
            <!--</form>-->
        <!--</section>-->
    <!--</div>-->
<!--</div>-->
</body>
</html>
